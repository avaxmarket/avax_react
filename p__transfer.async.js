"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[395],{14613:function(F,S,t){t.d(S,{J4:function(){return g},M$:function(){return L},XI:function(){return N},bU:function(){return b},fX:function(){return K},gp:function(){return a},jC:function(){return U},kE:function(){return _},mA:function(){return B},zl:function(){return E}});var U="AVAX",_="",L=40,E=43114,B="https://api.avaxmarket.xyz/scan_block_api",g="https://api.avaxmarket.xyz/market_list_api",N="https://snowtrace.io/address/",b="https://snowtrace.io/block/",a="https://snowtrace.io/tx/",K=.5},71624:function(F,S,t){t.d(S,{P:function(){return q}});var U=t(13448),_=t.n(U),L=t(74815),E=t.n(L),B=t(95530),g=t.n(B),N=t(28152),b=t.n(N),a=t(93236),K=t(69821),x=t.n(K),Q=J;function J(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=C.mustBeMetaMask,i=d===void 0?!1:d,e=C.silent,u=e===void 0?!1:e,o=C.timeout,h=o===void 0?3e3:o;T();var l=!1;return new Promise(function(w){window.ethereum?I():(window.addEventListener("ethereum#initialized",I,{once:!0}),setTimeout(function(){I()},h));function I(){if(!l){l=!0,window.removeEventListener("ethereum#initialized",I);var f=window,p=f.ethereum;if(p&&(!i||p.isMetaMask))w(p);else{var y=i&&p?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!u&&console.error("@metamask/detect-provider:",y),w(null)}}}});function T(){if(typeof i!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof u!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof h!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var V=t(14613),Z=function(d){return d===1?"https://mainnet.infura.io/v3/":"https://rinkeby.infura.io/v3/"},n={NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_BASE_ENV==="test"?4:1,z=V.zl,X=function(){var C=E()(_()().mark(function d(){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum.networkVersion===z){e.next=11;break}return e.prev=1,e.next=4,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:v.utils.toHex(z)}]});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),e.t0.code!==4902){e.next=11;break}return e.next=11,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainName:"AVAX Mainnet",chainId:v.utils.toHex(z),nativeCurrency:{name:"AVAX",decimals:18,symbol:"AVAX"},rpcUrls:["https://api.avax.network/ext/bc/C/rpc"]}]});case 11:case"end":return e.stop()}},d,null,[[1,6]])}));return function(){return C.apply(this,arguments)}}(),v,M,O=function(){var d,i=(d=window)===null||d===void 0?void 0:d.ethereum;return{isConnect:function(){var u,o;return(u=i==null||(o=i.isConnected)===null||o===void 0?void 0:o.call(i))!==null&&u!==void 0?u:!1},connect:function(){return E()(_()().mark(function u(){return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:i==null||i.enable(),setTimeout(E()(_()().mark(function l(){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:X();case 1:case"end":return w.stop()}},l)})),300);case 2:case"end":return h.stop()}},u)}))()},switch:X,notAccountWeb3:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n,o=new(x());return o.setProvider(new(x()).providers.HttpProvider(Z(u))),o},web3:function(){return E()(_()().mark(function u(){var o;return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Q();case 2:if(o=l.sent,!o){l.next=7;break}return M=o,v=new(x())(M),l.abrupt("return",v);case 7:case"end":return l.stop()}},u)}))()},getProvider:function(){return M}}},ne=["notAccountWeb3"],H=[V.zl],q=function(){var d=(0,a.useState)(),i=b()(d,2),e=i[0],u=i[1],o=(0,a.useState)(),h=b()(o,2),l=h[0],T=h[1],w=O(),I=w.notAccountWeb3,f=g()(w,ne),p=(0,a.useState)(),y=b()(p,2),s=y[0],c=y[1],k=(0,a.useState)(),P=b()(k,2),m=P[0],j=P[1],Y=(0,a.useState)(!1),W=b()(Y,2),ee=W[0],te=W[1],r=function(){localStorage.disconnect||(e!=null?e:v)&&((e!=null?e:v).eth.getAccounts().then(function(R){c(R[0])}),$())},$=function(){var D=E()(_()().mark(function R(){var G;return _()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,v==null?void 0:v.eth.getChainId();case 2:G=A.sent,j(G);case 4:case"end":return A.stop()}},R)}));return function(){return D.apply(this,arguments)}}();return(0,a.useEffect)(function(){te(!!s&&H.includes(m!=null?m:-1))},[s,m]),(0,a.useEffect)(function(){T(I(m))},[m]),(0,a.useEffect)(function(){f.web3().then(function(D){u(D),f.getProvider().on("connect",function(){console.log("connect"),r()}),f.getProvider().on("chainChanged",function(){console.log("chainChanged"),$()}),f.getProvider().on("disconnect",function(){console.log("disconnect"),r()}),f.getProvider().on("accountsChanged",function(){console.log("accountsChanged"),r()})})},[]),(0,a.useEffect)(function(){r()},[e]),{walletAddress:s,eth:f,address:s,chain:m,connect:function(){var D=E()(_()().mark(function G(){return _()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return localStorage.removeItem("disconnect"),A.next=3,f.connect();case 3:r();case 4:case"end":return A.stop()}},G)}));function R(){return D.apply(this,arguments)}return R}(),disconnect:function(){localStorage.setItem("disconnect","1"),c(""),te(!1)},switch_chian:f.switch,web3:e,isConnect:ee,rpcWeb3:l}}},19987:function(F,S,t){t.r(S);var U=t(13448),_=t.n(U),L=t(74815),E=t.n(L),B=t(77117),g=t.n(B),N=t(28152),b=t.n(N),a=t(40285),K=t(71624),x=t(93236),Q=t(94641),J=t(69821),V=t.n(J),Z=t(1562),n=t(62086),z=function(){var M=(0,K.P)(),O=M.address,ne=M.web3,H=M.connect,q=M.isConnect,C=(0,x.useState)([]),d=b()(C,2),i=d[0],e=d[1];(0,x.useEffect)(function(){O&&Q.Z.get("/api/avax/asc/utxo?address=".concat(O.toLocaleLowerCase(),"&pageNum=1&pageSize=500")).then(function(s){if(s.data.data){var c=s.data.data.records;e(c.map(function(k){return g()(g()({},k),{},{select:!1})}))}})},[O]);var u=i.filter(function(s){return s.select}).map(function(s){return s.value}).reduce(function(s,c){return(0,Z.Z)(s).plus(c)},(0,Z.Z)(0)),o=!u.isGreaterThan(0),h=(0,x.useState)(""),l=b()(h,2),T=l[0],w=l[1],I=(0,x.useState)(""),f=b()(I,2),p=f[0],y=f[1];return(0,n.jsxs)("div",{className:a.Z.transfer,children:[(0,n.jsxs)("div",{className:a.Z.transferInner,children:[(0,n.jsx)("div",{className:a.Z.title,children:"Tick"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",value:"aval",disabled:!0})}),(0,n.jsx)("div",{className:a.Z.title,children:"Select UTXO"}),(0,n.jsxs)("div",{className:a.Z.utxos,children:[O&&(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{marginBottom:"5px",color:"rgba(0,0,0,0.5)"},children:"Top 500utxo"}),(0,n.jsxs)("div",{style:{marginBottom:"20px",color:"rgba(0,0,0,0.5)"},children:["Select value: ",u.toFormat(4)]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:a.Z.all,onClick:function(){e(function(c){return c.map(function(k){return g()(g()({},k),{},{select:!0})})})},children:"All"})})]}),i.map(function(s,c){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:[a.Z.utxo_item,s.select?a.Z.utxo_select:""].join(" "),onClick:function(){e(function(P){return P.map(function(m,j){return g()(g()({},m),{},{select:j===c?!m.select:m.select})})})},children:["$",s.tick,": ",s.value]})})}),i.length===0&&(0,n.jsx)(n.Fragment,{children:O?(0,n.jsx)("div",{style:{fontSize:20,textAlign:"center",padding:"10px 0px",color:"rgba(0,0,0,0.5)"},children:"NO UTXO"}):(0,n.jsx)("div",{onClick:H,className:a.Z.connect,children:"Connect"})})]}),(0,n.jsx)("div",{className:a.Z.title,children:"Receiver"}),(0,n.jsx)("input",{value:T,placeholder:"0x...",onInput:function(c){w(c.target.value)}}),(0,n.jsxs)("div",{className:a.Z.title,children:["Amount ",(0,n.jsx)("span",{style:{opacity:.6},children:"(transfer token number)"})]}),(0,n.jsx)("input",{value:p,onInput:function(c){y(c.target.value)},placeholder:"0",type:"number"}),(0,n.jsx)("div",{style:{marginTop:50},children:q?(0,n.jsx)("button",{disabled:o,onClick:E()(_()().mark(function s(){var c,k,P,m,j,Y,W,ee;return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("amt::",p),T){r.next=4;break}return alert("receiver error"),r.abrupt("return");case 4:if(X(T||"")){r.next=7;break}return alert("receiver error"),r.abrupt("return");case 7:if(!(!p||(0,Z.Z)(p).isLessThanOrEqualTo(0))){r.next=10;break}return alert("amt error"),r.abrupt("return");case 10:return c=i.map(function($){return{txid:$.txid,vout:$.index.toString()}}),k="data:,"+JSON.stringify({p:"asc-20",op:"transfer",tick:"aval",vin:c,vout:[{amt:p,scriptPubKey:{addr:T.toLocaleLowerCase()}}]}),console.log(k),r.prev=13,P=new(V())(window.ethereum),r.next=17,window.ethereum.enable();case 17:return r.next=19,P.eth.getAccounts();case 19:return m=r.sent,j=m[0],console.log("sender",j),Y=P.utils.toWei("0","ether"),W=P.utils.asciiToHex(k),console.log(W),r.next=27,P.eth.sendTransaction({from:j,to:"0x0000000000000000000000000000000000000000",value:Y,data:W});case 27:ee=r.sent,alert("success"),r.next=34;break;case 31:r.prev=31,r.t0=r.catch(13),console.log(r.t0);case 34:case"end":return r.stop()}},s,null,[[13,31]])})),children:"Transfer"}):(0,n.jsx)("button",{onClick:H,children:"Connect"})})]}),(0,n.jsx)("div",{style:{height:"50px"}})]})};S.default=z;function X(v){return!(typeof v!="string"||!/^0x[0-9A-Fa-f]{40}$/.test(v))}},40285:function(F,S){S.Z={indexer:"indexer___KRUim",cards:"cards___RReFY",tokenname:"tokenname___AIJQN",balance:"balance___p_phs",inner:"inner____mGY3",token:"token___YZ2O8",loadingbox:"loadingbox___pkeSy",loading:"loading___v87br",rectangle:"rectangle___iYf9s",transfer:"transfer___ZMOqy",transferInner:"transferInner___Vz9kk",utxos:"utxos___uKhYw",title:"title___nwRif",tokenbox:"tokenbox___OXMSy",utxo_item:"utxo_item___ILjVk",utxo_select:"utxo_select___dfaYU",all:"all___tVF5b",connect:"connect___it59e",market:"market___hh364",header:"header___Peyd6",tick_type:"tick_type___MCcRa",tick_info:"tick_info___hDvTL",item:"item___sWkVl",item_title:"item_title___w7ctb",item_value:"item_value___IARMT",tabs:"tabs___LxTFv",tab_item:"tab_item___Ez6Id",tab_item_active:"tab_item_active___BKQKU",quick_list:"quick_list___hUzUa",market_list:"market_list___ZKG4J",market_list_item:"market_list_item___h_BE9",buy:"buy___kP3pZ",list_tick:"list_tick____w_on",list_num:"list_num___O8RTc",sell_usd:"sell_usd___ClX7o",line:"line___SuZOP",avalLogo:"avalLogo___a10An",tabs_wrap:"tabs_wrap___d9GIz",quick_list_wrap:"quick_list_wrap___sWN69",pageWrap:"pageWrap___vLCzz",total:"total___IQw8K",emptySize:"emptySize___ZKxVQ",dialogWrap:"dialogWrap___q6lr3",dialogWrapOutBox:"dialogWrapOutBox___QYl4T",orderTableWrap:"orderTableWrap___z1Wto"}}}]);
