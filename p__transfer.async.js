"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[395],{71624:function(X,S,t){t.d(S,{P:function(){return Q}});var N=t(13448),j=t.n(N),Z=t(74815),K=t.n(Z),$=t(95530),E=t.n($),G=t(28152),h=t.n(G),n=t(93236),Y=t(69821),g=t.n(Y),z=F;function F(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=P.mustBeMetaMask,i=d===void 0?!1:d,a=P.silent,l=a===void 0?!1:a,o=P.timeout,x=o===void 0?3e3:o;T();var _=!1;return new Promise(function(p){window.ethereum?C():(window.addEventListener("ethereum#initialized",C,{once:!0}),setTimeout(function(){C()},x));function C(){if(!_){_=!0,window.removeEventListener("ethereum#initialized",C);var v=window,b=v.ethereum;if(b&&(!i||b.isMetaMask))p(b);else{var f=i&&b?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!l&&console.error("@metamask/detect-provider:",f),p(null)}}}});function T(){if(typeof i!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof l!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof x!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var V=function(d){return d===1?"https://mainnet.infura.io/v3/":"https://rinkeby.infura.io/v3/"},W={NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_BASE_ENV==="test"?4:1,e,y,J=function(){var d,i=(d=window)===null||d===void 0?void 0:d.ethereum;return{isConnect:function(){var l,o;return(l=i==null||(o=i.isConnected)===null||o===void 0?void 0:o.call(i))!==null&&l!==void 0?l:!1},connect:function(){i==null||i.enable()},notAccountWeb3:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W,o=new(g());return o.setProvider(new(g()).providers.HttpProvider(V(l))),o},web3:function(){return K()(j()().mark(function l(){var o;return j()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,z();case 2:if(o=_.sent,!o){_.next=7;break}return y=o,e=new(g())(y),_.abrupt("return",e);case 7:case"end":return _.stop()}},l)}))()},getProvider:function(){return y}}},R=["notAccountWeb3"],A=[1,4],Q=function(){var d=(0,n.useState)(),i=h()(d,2),a=i[0],l=i[1],o=(0,n.useState)(),x=h()(o,2),_=x[0],T=x[1],p=J(),C=p.notAccountWeb3,v=E()(p,R),b=(0,n.useState)(),f=h()(b,2),w=f[0],s=f[1],u=(0,n.useState)(),m=h()(u,2),c=m[0],M=m[1],D=(0,n.useState)(!1),U=h()(D,2),I=U[0],H=U[1],B=function(){(a!=null?a:e)&&((a!=null?a:e).eth.getAccounts().then(function(k){s(k[0])}),r())},r=function(){var O=K()(j()().mark(function k(){var q;return j()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,e==null?void 0:e.eth.getChainId();case 2:q=L.sent,M(q);case 4:case"end":return L.stop()}},k)}));return function(){return O.apply(this,arguments)}}();return(0,n.useEffect)(function(){H(!!w&&A.includes(c!=null?c:-1))},[w,c]),(0,n.useEffect)(function(){T(C(c))},[c]),(0,n.useEffect)(function(){v.web3().then(function(O){l(O),v.getProvider().on("connect",function(){console.log("connect"),B()}),v.getProvider().on("chainChanged",function(){console.log("chainChanged"),r()}),v.getProvider().on("disconnect",function(){console.log("disconnect"),B()}),v.getProvider().on("accountsChanged",function(){console.log("accountsChanged"),B()})})},[]),(0,n.useEffect)(function(){B()},[a]),{walletAddress:w,eth:v,address:w,chain:c,connect:v.connect,web3:a,isConnect:I,rpcWeb3:_}}},19987:function(X,S,t){t.r(S);var N=t(13448),j=t.n(N),Z=t(74815),K=t.n(Z),$=t(77117),E=t.n($),G=t(28152),h=t.n(G),n=t(40285),Y=t(71624),g=t(93236),z=t(94641),F=t(69821),V=t.n(F),W=t(1562),e=t(62086),y=function(){var R=(0,Y.P)(),A=R.address,Q=R.web3,P=R.connect,d=(0,g.useState)([]),i=h()(d,2),a=i[0],l=i[1];(0,g.useEffect)(function(){A&&z.Z.get("/api/avax/asc/utxo?address=".concat(A.toLocaleLowerCase(),"&pageNum=1&pageSize=200")).then(function(s){if(s.data.data){var u=s.data.data.records;l(u.map(function(m){return E()(E()({},m),{},{select:!1})}))}})},[A]);var o=a.filter(function(s){return s.select}).map(function(s){return s.value}).reduce(function(s,u){return(0,W.Z)(s).plus(u)},(0,W.Z)(0)),x=!o.isGreaterThan(0),_=(0,g.useState)(""),T=h()(_,2),p=T[0],C=T[1],v=(0,g.useState)(""),b=h()(v,2),f=b[0],w=b[1];return(0,e.jsxs)("div",{className:n.Z.transfer,children:[(0,e.jsxs)("div",{className:n.Z.transferInner,children:[(0,e.jsx)("div",{className:n.Z.title,children:"Tick"}),(0,e.jsx)("div",{children:(0,e.jsx)("input",{type:"text",value:"aval",disabled:!0})}),(0,e.jsx)("div",{className:n.Z.title,children:"Select UTXO"}),(0,e.jsxs)("div",{className:n.Z.utxos,children:[A&&(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:"5px",color:"rgba(0,0,0,0.5)"},children:"Top 200utxo"}),(0,e.jsxs)("div",{style:{marginBottom:"20px",color:"rgba(0,0,0,0.5)"},children:["Select value: ",o.toFormat(4)]})]}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:n.Z.all,onClick:function(){l(function(u){return u.map(function(m){return E()(E()({},m),{},{select:!0})})})},children:"All"})})]}),a.map(function(s,u){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:[n.Z.utxo_item,s.select?n.Z.utxo_select:""].join(" "),onClick:function(){l(function(c){return c.map(function(M,D){return E()(E()({},M),{},{select:D===u?!M.select:M.select})})})},children:["$",s.tick,": ",s.value]})})}),a.length===0&&(0,e.jsx)(e.Fragment,{children:A?(0,e.jsx)("div",{style:{fontSize:20,textAlign:"center",padding:"10px 0px",color:"rgba(0,0,0,0.5)"},children:"NO UTXO"}):(0,e.jsx)("div",{onClick:P,className:n.Z.connect,children:"Connect"})})]}),(0,e.jsx)("div",{className:n.Z.title,children:"Receiver"}),(0,e.jsx)("input",{value:p,placeholder:"0x...",onInput:function(u){C(u.target.value)}}),(0,e.jsxs)("div",{className:n.Z.title,children:["Amount ",(0,e.jsx)("span",{style:{opacity:.6},children:"(transfer token number)"})]}),(0,e.jsx)("input",{value:f,onInput:function(u){w(u.target.value)},placeholder:"0",type:"number"}),(0,e.jsx)("div",{style:{marginTop:50},children:(0,e.jsx)("button",{disabled:x,onClick:K()(j()().mark(function s(){var u,m,c,M,D,U,I,H;return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("amt::",f),p){r.next=4;break}return alert("receiver error"),r.abrupt("return");case 4:if(!(!f||(0,W.Z)(f).isLessThanOrEqualTo(0))){r.next=7;break}return alert("amt error"),r.abrupt("return");case 7:return u=a.map(function(O){return{txid:O.txid,vout:O.index.toString()}}),m="data:,"+JSON.stringify({p:"asc-20",op:"transfer",tick:"aval",vin:u,vout:[{amt:f,scriptPubKey:{addr:p}}]}),console.log(m),r.prev=10,c=new(V())(window.ethereum),r.next=14,window.ethereum.enable();case 14:return r.next=16,c.eth.getAccounts();case 16:return M=r.sent,D=M[0],console.log("sender",D),U=c.utils.toWei("0","ether"),I=c.utils.asciiToHex(m),console.log(I),r.next=24,c.eth.sendTransaction({from:D,to:"0x0000000000000000000000000000000000000000",value:U,data:I});case 24:H=r.sent,alert("success"),r.next=31;break;case 28:r.prev=28,r.t0=r.catch(10),console.log(r.t0);case 31:case"end":return r.stop()}},s,null,[[10,28]])})),children:"Transfer"})})]}),(0,e.jsx)("div",{style:{height:"50px"}})]})};S.default=y},40285:function(X,S){S.Z={indexer:"indexer___KRUim",cards:"cards___RReFY",tokenname:"tokenname___AIJQN",balance:"balance___p_phs",inner:"inner____mGY3",token:"token___YZ2O8",loadingbox:"loadingbox___pkeSy",loading:"loading___v87br",rectangle:"rectangle___iYf9s",transfer:"transfer___ZMOqy",transferInner:"transferInner___Vz9kk",utxos:"utxos___uKhYw",title:"title___nwRif",tokenbox:"tokenbox___OXMSy",utxo_item:"utxo_item___ILjVk",utxo_select:"utxo_select___dfaYU",all:"all___tVF5b",connect:"connect___it59e"}}}]);
