"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[395],{71624:function(Q,T,t){t.d(T,{P:function(){return A}});var N=t(13448),j=t.n(N),Z=t(74815),k=t.n(Z),$=t(95530),E=t.n($),F=t(28152),h=t.n(F),r=t(93236),G=t(69821),g=t.n(G),V=Y;function Y(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=D.mustBeMetaMask,l=d===void 0?!1:d,a=D.silent,i=a===void 0?!1:a,s=D.timeout,p=s===void 0?3e3:s;I();var _=!1;return new Promise(function(P){window.ethereum?v():(window.addEventListener("ethereum#initialized",v,{once:!0}),setTimeout(function(){v()},p));function v(){if(!_){_=!0,window.removeEventListener("ethereum#initialized",v);var f=window,x=f.ethereum;if(x&&(!l||x.isMetaMask))P(x);else{var O=l&&x?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!i&&console.error("@metamask/detect-provider:",O),P(null)}}}});function I(){if(typeof l!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof i!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof p!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var z=function(d){return d===1?"https://mainnet.infura.io/v3/":"https://rinkeby.infura.io/v3/"},W={NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_BASE_ENV==="test"?4:1,e,y,H=function(){var d,l=(d=window)===null||d===void 0?void 0:d.ethereum;return{isConnect:function(){var i,s;return(i=l==null||(s=l.isConnected)===null||s===void 0?void 0:s.call(l))!==null&&i!==void 0?i:!1},connect:function(){l==null||l.enable()},notAccountWeb3:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W,s=new(g());return s.setProvider(new(g()).providers.HttpProvider(z(i))),s},web3:function(){return k()(j()().mark(function i(){var s;return j()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,V();case 2:if(s=_.sent,!s){_.next=7;break}return y=s,e=new(g())(y),_.abrupt("return",e);case 7:case"end":return _.stop()}},i)}))()},getProvider:function(){return y}}},R=["notAccountWeb3"],U=[1,4],A=function(){var d=(0,r.useState)(),l=h()(d,2),a=l[0],i=l[1],s=(0,r.useState)(),p=h()(s,2),_=p[0],I=p[1],P=H(),v=P.notAccountWeb3,f=E()(P,R),x=(0,r.useState)(),O=h()(x,2),m=O[0],X=O[1],o=(0,r.useState)(),u=h()(o,2),c=u[0],b=u[1],C=(0,r.useState)(!1),M=h()(C,2),K=M[0],L=M[1],w=function(){(a!=null?a:e)&&((a!=null?a:e).eth.getAccounts().then(function(S){X(S[0])}),J())},J=function(){var n=k()(j()().mark(function S(){var q;return j()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,e==null?void 0:e.eth.getChainId();case 2:q=B.sent,b(q);case 4:case"end":return B.stop()}},S)}));return function(){return n.apply(this,arguments)}}();return(0,r.useEffect)(function(){L(!!m&&U.includes(c!=null?c:-1))},[m,c]),(0,r.useEffect)(function(){I(v(c))},[c]),(0,r.useEffect)(function(){f.web3().then(function(n){i(n),f.getProvider().on("connect",function(){console.log("connect"),w()}),f.getProvider().on("chainChanged",function(){console.log("chainChanged"),J()}),f.getProvider().on("disconnect",function(){console.log("disconnect"),w()}),f.getProvider().on("accountsChanged",function(){console.log("accountsChanged"),w()})})},[]),(0,r.useEffect)(function(){w()},[a]),{walletAddress:m,eth:f,address:m,chain:c,connect:f.connect,web3:a,isConnect:K,rpcWeb3:_}}},19987:function(Q,T,t){t.r(T);var N=t(13448),j=t.n(N),Z=t(74815),k=t.n(Z),$=t(77117),E=t.n($),F=t(28152),h=t.n(F),r=t(40285),G=t(71624),g=t(93236),V=t(94641),Y=t(69821),z=t.n(Y),W=t(1562),e=t(62086),y=function(){var U=(0,G.P)(),A=U.address,D=U.web3,d=U.connect,l=(0,g.useState)([]),a=h()(l,2),i=a[0],s=a[1];(0,g.useEffect)(function(){A&&V.Z.get("/api/avax/asc/utxo?address=".concat(A.toLocaleLowerCase(),"&pageNum=1&pageSize=500")).then(function(o){if(o.data.data){var u=o.data.data.records;s(u.map(function(c){return E()(E()({},c),{},{select:!1})}))}})},[A]);var p=i.filter(function(o){return o.select}).map(function(o){return o.value}).reduce(function(o,u){return(0,W.Z)(o).plus(u)},(0,W.Z)(0)),_=!p.isGreaterThan(0),I=(0,g.useState)(""),P=h()(I,2),v=P[0],f=P[1],x=(0,g.useState)(""),O=h()(x,2),m=O[0],X=O[1];return(0,e.jsxs)("div",{className:r.Z.transfer,children:[(0,e.jsxs)("div",{className:r.Z.transferInner,children:[(0,e.jsx)("div",{className:r.Z.title,children:"Tick"}),(0,e.jsx)("div",{children:(0,e.jsx)("input",{type:"text",value:"aval",disabled:!0})}),(0,e.jsx)("div",{className:r.Z.title,children:"Select UTXO"}),(0,e.jsxs)("div",{className:r.Z.utxos,children:[A&&(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:"5px",color:"rgba(0,0,0,0.5)"},children:"Top 500utxo"}),(0,e.jsxs)("div",{style:{marginBottom:"20px",color:"rgba(0,0,0,0.5)"},children:["Select value: ",p.toFormat(4)]})]}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:r.Z.all,onClick:function(){s(function(u){return u.map(function(c){return E()(E()({},c),{},{select:!0})})})},children:"All"})})]}),i.map(function(o,u){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:[r.Z.utxo_item,o.select?r.Z.utxo_select:""].join(" "),onClick:function(){s(function(b){return b.map(function(C,M){return E()(E()({},C),{},{select:M===u?!C.select:C.select})})})},children:["$",o.tick,": ",o.value]})})}),i.length===0&&(0,e.jsx)(e.Fragment,{children:A?(0,e.jsx)("div",{style:{fontSize:20,textAlign:"center",padding:"10px 0px",color:"rgba(0,0,0,0.5)"},children:"NO UTXO"}):(0,e.jsx)("div",{onClick:d,className:r.Z.connect,children:"Connect"})})]}),(0,e.jsx)("div",{className:r.Z.title,children:"Receiver"}),(0,e.jsx)("input",{value:v,placeholder:"0x...",onInput:function(u){f(u.target.value)}}),(0,e.jsxs)("div",{className:r.Z.title,children:["Amount ",(0,e.jsx)("span",{style:{opacity:.6},children:"(transfer token number)"})]}),(0,e.jsx)("input",{value:m,onInput:function(u){X(u.target.value)},placeholder:"0",type:"number"}),(0,e.jsx)("div",{style:{marginTop:50},children:(0,e.jsx)("button",{disabled:_,onClick:k()(j()().mark(function o(){var u,c,b,C,M,K,L,w;return j()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("amt::",m),v){n.next=4;break}return alert("receiver error"),n.abrupt("return");case 4:if(H(v||"")){n.next=7;break}return alert("receiver error"),n.abrupt("return");case 7:if(!(!m||(0,W.Z)(m).isLessThanOrEqualTo(0))){n.next=10;break}return alert("amt error"),n.abrupt("return");case 10:return u=i.map(function(S){return{txid:S.txid,vout:S.index.toString()}}),c="data:,"+JSON.stringify({p:"asc-20",op:"transfer",tick:"aval",vin:u,vout:[{amt:m,scriptPubKey:{addr:v.toLocaleLowerCase()}}]}),console.log(c),n.prev=13,b=new(z())(window.ethereum),n.next=17,window.ethereum.enable();case 17:return n.next=19,b.eth.getAccounts();case 19:return C=n.sent,M=C[0],console.log("sender",M),K=b.utils.toWei("0","ether"),L=b.utils.asciiToHex(c),console.log(L),n.next=27,b.eth.sendTransaction({from:M,to:"0x0000000000000000000000000000000000000000",value:K,data:L});case 27:w=n.sent,alert("success"),n.next=34;break;case 31:n.prev=31,n.t0=n.catch(13),console.log(n.t0);case 34:case"end":return n.stop()}},o,null,[[13,31]])})),children:"Transfer"})})]}),(0,e.jsx)("div",{style:{height:"50px"}})]})};T.default=y;function H(R){return!(typeof R!="string"||!/^0x[0-9A-Fa-f]{40}$/.test(R))}},40285:function(Q,T){T.Z={indexer:"indexer___KRUim",cards:"cards___RReFY",tokenname:"tokenname___AIJQN",balance:"balance___p_phs",inner:"inner____mGY3",token:"token___YZ2O8",loadingbox:"loadingbox___pkeSy",loading:"loading___v87br",rectangle:"rectangle___iYf9s",transfer:"transfer___ZMOqy",transferInner:"transferInner___Vz9kk",utxos:"utxos___uKhYw",title:"title___nwRif",tokenbox:"tokenbox___OXMSy",utxo_item:"utxo_item___ILjVk",utxo_select:"utxo_select___dfaYU",all:"all___tVF5b",connect:"connect___it59e"}}}]);
